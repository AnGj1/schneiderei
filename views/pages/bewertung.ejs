
<!--<title>Kundenbewertungen</title>
<div class="container-a">
    <h1>Kundenbewertung abgeben</h1>

    <form id="review-form">
      <label for="name">Name:</label>
      <input type="text" id="name"><br>

      <label for="rating">Bewertung:</label>
      <div class="stars">
        <span onclick="setRating(1)"></span>
        <span onclick="setRating(2)"></span>
        <span onclick="setRating(3)"></span>
        <span onclick="setRating(4)"></span>
        <span onclick="setRating(5)"></span>
      </div><br>

      <label for="comment">Kommentar:</label><br>
      <textarea id="comment"></textarea><br>

      <button type="button" class="btn btn-primary" onclick="submitReview()">Bewertung abgeben</button>
    </form>

    <h2>Bewertungen:</h2>
    <ul id="reviews-list"></ul>
</div>

<script>
    function renderReviews() {
      const reviews = JSON.parse(localStorage.getItem('reviews')) || [];

      const reviewsList = document.getElementById('reviews-list');
      reviewsList.innerHTML = '';

      reviews.forEach((review, index) => {
        const div = document.createElement('div');
        div.className = 'review';
        div.innerHTML = `
          <p>${review.author}</p>
          <p>${review.comment}</p>
          <p>${review.rating}/5 Sterne</p>
          <div class="review-actions">
            <button class="btn btn-primary" onclick="editReview(${index})">Bearbeiten</button>
            <button class="btn btn-primary" onclick="deleteReview(${index})">Löschen</button>
          </div>
        `;
        reviewsList.appendChild(div);
      });
    }

    function setRating(rating) {
        const stars = document.querySelectorAll('.stars span');
        stars.forEach((star, index) => {
        if (index < rating) {
            star.classList.add('star-filled');
        } else {
            star.classList.remove('star-filled');
        }
        });
    }

    function submitReview() {
      const name = document.getElementById('name').value;
      const rating = document.querySelectorAll('.stars span.star-filled').length;
      const comment = document.getElementById('comment').value;

      const newReview = {
        author: name,
        comment: comment,
        rating: rating,
      };

      const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
      reviews.push(newReview);
      localStorage.setItem('reviews', JSON.stringify(reviews));

      document.getElementById('name').value = '';
      document.getElementById('comment').value = '';
      document.querySelectorAll('.stars span.star-filled').forEach(span => {
        span.classList.remove('star-filled');
      });

      renderReviews();
    }

    function deleteReview(index) {
      const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
      reviews.splice(index, 1);
      localStorage.setItem('reviews', JSON.stringify(reviews));
      renderReviews();
    }

    function editReview(index) {
      const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
      const review = reviews[index];
      const comment = prompt('Bearbeiten Sie Ihren Kommentar:', review.comment);
      if (comment !== null) {
        review.comment = comment;
        localStorage.setItem('reviews', JSON.stringify(reviews));
        renderReviews();
      }
    }

    renderReviews();
</script> -->
<title>Kundenbewertungen</title>
<div id="app" class="container-a">
    <h1>Kundenbewertung abgeben</h1>

    <form @submit.prevent="submitReview">
      <label for="name">Name:</label>
      <input type="text" id="name" v-model="name"><br>

      <label for="rating">Bewertung:</label>
      <div class="stars">
        <span @click="setRating(1)" :class="{ 'star-filled': rating >= 1 }"></span>
        <span @click="setRating(2)" :class="{ 'star-filled': rating >= 2 }"></span>
        <span @click="setRating(3)" :class="{ 'star-filled': rating >= 3 }"></span>
        <span @click="setRating(4)" :class="{ 'star-filled': rating >= 4 }"></span>
        <span @click="setRating(5)" :class="{ 'star-filled': rating >= 5 }"></span>
      </div><br>

      <label for="comment">Kommentar:</label><br>
      <textarea id="comment" v-model="comment"></textarea><br>

      <button type="submit" class="btn btn-primary">Bewertung abgeben</button>
    </form>

    <h2>Bewertungen:</h2>
    <ul>
      <li v-for="(review, index) in reviews" :key="index" class="review">
        <p>{{ review.author }}</p>
        <p>{{ review.comment }}</p>
        <p>{{ review.rating }}/5 Sterne</p>
        <div class="review-actions">
          <button class="btn btn-primary" @click="editReview(index)">Bearbeiten</button>
          <button class="btn btn-primary" @click="deleteReview(index)">Löschen</button>
        </div>
      </li>
    </ul>
</div>

<style>
  .stars span {
    cursor: pointer;
  }
  .stars span.star-filled {
    color: gold;
  }
</style>

<script src="https://unpkg.com/vue@3.3.1"></script>
<script>
  const app = Vue.createApp({
    data() {
      return {
        name: '',
        rating: 0,
        comment: '',
        reviews: JSON.parse(localStorage.getItem('reviews')) || []
      }
    },
    methods: {
      setRating(rating) {
        this.rating = rating;
      },
      submitReview() {
        const newReview = {
          author: this.name,
          comment: this.comment,
          rating: this.rating,
        };

        this.reviews.push(newReview);
        localStorage.setItem('reviews', JSON.stringify(this.reviews));

        this.name = '';
        this.comment = '';
        this.rating = 0;
      },
      deleteReview(index) {
        this.reviews.splice(index, 1);
        localStorage.setItem('reviews', JSON.stringify(this.reviews));
      },
      editReview(index) {
        const comment = prompt('Bearbeiten Sie Ihren Kommentar:', this.reviews[index].comment);
        if (comment !== null) {
          this.reviews[index].comment = comment;
          localStorage.setItem('reviews', JSON.stringify(this.reviews));
        }
      }
    }
  });

  app.mount('#app');
</script>
